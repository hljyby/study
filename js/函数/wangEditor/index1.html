<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>wangEditoråŸºæœ¬æ“ä½œ</title>
</head>
<style type="text/css">
.toolbar {
    border: 1px solid #ccc;
}

.text {
    border: 1px solid #ccc;
    height: 400px;
}
textarea{
	width: 100%;
	resize: none;
	padding: 0 10px;
	box-sizing: border-box;
}
</style>

<body>
    
   	<h2>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨1</h2>

    <div id="editor"></div>

    <button onclick="editor1.txt.clear()">æ¸…ç©ºç¼–è¾‘å™¨</button>
    
    <button onclick="alert(editor1.txt.html())">è·å–HTML</button>
    
    <button onclick="alert(editor1.txt.text())">è·å–æ–‡æœ¬</button>

    <button onclick="getJson()">è·å–json</button>

    <h2>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨2</h2>

    <div id="div1" class="toolbar"></div>
    
    <div style="padding: 5px 0; color: #ccc">ä¸­é—´éš”ç¦»å¸¦</div>
    
    <div id="div2" class="text" style="min-height: 456px;">
    
        <!--å¯ä½¿ç”¨ min-height å®ç°ç¼–è¾‘åŒºåŸŸè‡ªåŠ¨å¢åŠ é«˜åº¦-->
    
        <p>è¯·è¾“å…¥å†…å®¹</p>
    
    </div>
    
	<textarea name="" id="text" rows="10"></textarea>

    <!-- æ³¨æ„ï¼Œ åªéœ€è¦å¼•ç”¨ JSï¼Œæ— éœ€å¼•ç”¨ä»»ä½• CSS ï¼ï¼ï¼-->
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="script/wangEditor-3.1.1.js"></script>
    
    <script type="text/javascript">

		// å£°æ˜å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
	    var E = window.wangEditor;
	    
	    // åˆå§‹åŒ–å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
	    var editor1 = new E('#editor');

	    // cssçš„z-index
	    editor1.customConfig.zIndex = 100;

	    // è‡ªå®šä¹‰èœå•é…ç½®
	    editor1.customConfig.menus = [
		    'head',  // æ ‡é¢˜
		    'bold',  // ç²—ä½“
		    'fontSize',  // å­—å·
		    'fontName',  // å­—ä½“
		    'italic',  // æ–œä½“
		    'underline',  // ä¸‹åˆ’çº¿
		    'strikeThrough',  // åˆ é™¤çº¿
		    'foreColor',  // æ–‡å­—é¢œè‰²
		    'backColor',  // èƒŒæ™¯é¢œè‰²
		    'link',  // æ’å…¥é“¾æ¥
		    'list',  // åˆ—è¡¨
		    'justify',  // å¯¹é½æ–¹å¼
		    'quote',  // å¼•ç”¨
		    'emoticon',  // è¡¨æƒ…
		    'image',  // æ’å…¥å›¾ç‰‡
		    'table',  // è¡¨æ ¼
		    'video',  // æ’å…¥è§†é¢‘
		    'code',  // æ’å…¥ä»£ç 
		    'undo',  // æ’¤é”€
		    'redo'  // é‡å¤
	    ]

	    // è‡ªå®šä¹‰å­—ä½“
	    editor1.customConfig.fontNames = [
	        'å®‹ä½“',
	        'å¾®è½¯é›…é»‘',
	    ]

		// è¡¨æƒ…é¢æ¿å¯ä»¥æœ‰å¤šä¸ª tab ï¼Œå› æ­¤è¦é…ç½®æˆä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ª tab çš„é…ç½®
	    editor1.customConfig.emotions = [
	        {
	            // tab çš„æ ‡é¢˜
	            title: 'é»˜è®¤',
	            // type -> 'emoji' / 'image'
	            type: 'image',
	            // content -> æ•°ç»„
	            content: [
	                {
	                    alt: '[åç¬‘]',
	                    src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png'
	                },
	                {
	                    alt: '[èˆ”å±]',
	                    src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png'
	                }
	            ]
	        },
	        {
	            // tab çš„æ ‡é¢˜
	            title: 'emoji',
	            // type -> 'emoji' / 'image'
	            type: 'emoji',
	            // content -> æ•°ç»„
	            content: ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†']
	        }
	    ]
		
		// è‡ªå®šä¹‰é…ç½®é¢œè‰²ï¼ˆå­—ä½“é¢œè‰²ã€èƒŒæ™¯è‰²ï¼‰
	    editor1.customConfig.colors = [
	        '#000000',
	        '#eeece0',
	        '#1c487f',
	    ]
	    
	    // è‡ªå®šä¹‰è¯­è¨€
        editor1.customConfig.lang = {
	        'è®¾ç½®æ ‡é¢˜': 'title',
	        'æ­£æ–‡': 'p',
	        'é“¾æ¥æ–‡å­—': 'link text',
	        'é“¾æ¥': 'link',
	        'ä¸Šä¼ å›¾ç‰‡': 'upload image',
	        'ä¸Šä¼ ': 'upload',
	        'åˆ›å»º': 'init'
	        // è¿˜å¯è‡ªå®šæ·»åŠ æ›´å¤š
	    }

	    // é€šè¿‡ url å‚æ•°é…ç½® debug æ¨¡å¼ã€‚url ä¸­å¸¦æœ‰ wangeditor_debug_mode=1 æ‰ä¼šå¼€å¯ debug æ¨¡å¼
    	editor1.customConfig.debug = true;
    	// editor1.customConfig.debug = location.href.indexOf('wangeditor_debug_mode=1') > 0;

	    // åˆ›å»ºç¼–è¾‘å™¨1
	    editor1.create();
		
		// ç”¨ JS è®¾ç½®çš„å†…å®¹
		editor1.txt.html('<p>ç”¨ JS è®¾ç½®çš„å†…å®¹</p>')
	    
	    // åˆå§‹åŒ–ç¼–è¾‘å™¨2
	    var editor2 = new E('#div1', '#div2');

		// éšè—â€œç½‘ç»œå›¾ç‰‡â€tab
    	editor2.customConfig.showLinkImg = false;

    	// ä¸‹é¢ä¸¤ä¸ªé…ç½®ï¼Œä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå³å¯æ˜¾ç¤ºâ€œä¸Šä¼ å›¾ç‰‡â€çš„tabã€‚ä½†æ˜¯ä¸¤è€…ä¸è¦åŒæ—¶ä½¿ç”¨ï¼ï¼ï¼
	    // editor2.customConfig.uploadImgShowBase64 = true   // ä½¿ç”¨ base64 ä¿å­˜å›¾ç‰‡
	    // editor2.customConfig.uploadImgServer = '/upload'  // ä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨

		// ä½¿ç”¨ base64 ä¿å­˜å›¾ç‰‡
		editor2.customConfig.uploadImgShowBase64 = true;

		// åŒæ­¥textarea
        editor2.customConfig.onchange = function (html) {
            // ç›‘æ§å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°åˆ° textarea
            $('#text').val(html);
        }

        // onblur
	    editor2.customConfig.onblur = function (html) {
	        // html å³ç¼–è¾‘å™¨ä¸­çš„å†…å®¹
	        console.log('onblur', html)
	    }

	    // onfocus
	    editor2.customConfig.onfocus = function () {
	        // html å³ç¼–è¾‘å™¨ä¸­çš„å†…å®¹
	        console.log('onfocus')
	    }
	    
        // å…³é—­ç²˜è´´æ ·å¼çš„è¿‡æ»¤
	    editor2.customConfig.pasteFilterStyle = false;

	    // å¿½ç•¥ç²˜è´´å†…å®¹ä¸­çš„å›¾ç‰‡
	    editor2.customConfig.pasteIgnoreImg = true;
	    
	    // è‡ªå®šä¹‰å¤„ç†ç²˜è´´çš„æ–‡æœ¬å†…å®¹
	    editor2.customConfig.pasteTextHandle = function (content) {
	        // content å³ç²˜è´´è¿‡æ¥çš„å†…å®¹ï¼ˆhtml æˆ– çº¯æ–‡æœ¬ï¼‰ï¼Œå¯è¿›è¡Œè‡ªå®šä¹‰å¤„ç†ç„¶åè¿”å›
	        return content + '<p>åœ¨ç²˜è´´å†…å®¹åé¢è¿½åŠ ä¸€è¡Œ</p>';
	    }

	    // æ’å…¥å›¾ç‰‡çš„å›è°ƒ
	    editor2.customConfig.linkImgCallback = function (url) {
		    console.log(url); // url å³æ’å…¥å›¾ç‰‡çš„åœ°å€
		}

		// æ’å…¥é“¾æ¥çš„æ ¡éªŒ
		editor2.customConfig.linkCheck = function (text, link) {
		    console.log(text); // æ’å…¥çš„æ–‡å­—
		    console.log(link); // æ’å…¥çš„é“¾æ¥

		    return true; // è¿”å› true è¡¨ç¤ºæ ¡éªŒæˆåŠŸ
		    // return 'éªŒè¯å¤±è´¥' // è¿”å›å­—ç¬¦ä¸²ï¼Œå³æ ¡éªŒå¤±è´¥çš„æç¤ºä¿¡æ¯
		}

		// æ’å…¥ç½‘ç»œå›¾ç‰‡çš„æ ¡éªŒ
		editor2.customConfig.linkImgCheck = function (src) {
		    console.log(src); // å›¾ç‰‡çš„é“¾æ¥

		    return true; // è¿”å› true è¡¨ç¤ºæ ¡éªŒæˆåŠŸ
		    // return 'éªŒè¯å¤±è´¥' // è¿”å›å­—ç¬¦ä¸²ï¼Œå³æ ¡éªŒå¤±è´¥çš„æç¤ºä¿¡æ¯
		}

	    // åˆ›å»ºç¼–è¾‘å™¨2
	    editor2.create();

	    // jsè¿½åŠ æ–‡æœ¬
	    editor2.txt.append('<p>è¿½åŠ çš„å†…å®¹</p>')

	    // åˆå§‹åŒ– textarea çš„å€¼
        $('#text').val(editor2.txt.html());
	    
	    // ç¦ç”¨ç¼–è¾‘åŠŸèƒ½
		editor1.$textElem.attr('contenteditable', false);

		// å¼€å¯ç¼–è¾‘åŠŸèƒ½
		editor2.$textElem.attr('contenteditable', true);

		// è·å–json
		function getJson() {
	        var json = editor1.txt.getJSON();  // è·å– JSON æ ¼å¼çš„å†…å®¹
	        var jsonStr = JSON.stringify(json);
	        console.log(json);
	        console.log(jsonStr);
	    }



    </script>

</body>

</html>